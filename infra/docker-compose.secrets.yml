# Docker Compose overlay for production secrets
# Use this with: docker compose -f docker-compose.prod.yml -f docker-compose.secrets.yml up
# Secrets are passed from environment variables (GitHub Actions, shell export, etc.)

version: '3.9'

services:
  api:
    environment:
      # GitHub App credentials (required)
      APP_ID: ${APP_ID}
      APP_PRIVATE_KEY_PEM_BASE64: ${APP_PRIVATE_KEY_PEM_BASE64}
      WEBHOOK_SECRET: ${WEBHOOK_SECRET}
      # Optional overrides
      CHECK_NAME: ${CHECK_NAME:-FlowLint}
      CHECK_TITLE: ${CHECK_TITLE:-FlowLint findings}
      LOG_LEVEL: ${LOG_LEVEL:-info}

  worker:
    environment:
      # GitHub App credentials (required)
      APP_ID: ${APP_ID}
      APP_PRIVATE_KEY_PEM_BASE64: ${APP_PRIVATE_KEY_PEM_BASE64}
      # Optional overrides
      CHECK_NAME: ${CHECK_NAME:-FlowLint}
      LOG_LEVEL: ${LOG_LEVEL:-info}
